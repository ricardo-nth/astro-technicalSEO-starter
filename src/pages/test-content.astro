---
// Test page to verify new content collections
import BaseLayout from '../layouts/BaseLayout.astro';
import { 
  getAllAuthors, 
  getAllTeamMembers, 
  getAllCaseStudies, 
  getAllBlogPosts,
  getAllLegalPages,
  getAllPressItems 
} from '../utils/content.ts';

// Test data loading
const authors = await getAllAuthors();
const team = await getAllTeamMembers();
const caseStudies = await getAllCaseStudies();
const blogPosts = await getAllBlogPosts();
const legalPages = await getAllLegalPages();
const pressItems = await getAllPressItems();
---

<BaseLayout 
  metadata={{
    title: "Content Collections Test",
    description: "Testing new content collections"
  }}
>
  <main style="padding: 2rem; max-width: 800px; margin: 0 auto;">
    <h1>Content Collections Test</h1>
    
    <section>
      <h2>Authors ({authors.length})</h2>
      {authors.map(author => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{author.data.name}</h3>
          <p>{author.data.role}</p>
          <p>{author.data.bio}</p>
        </div>
      ))}
    </section>

    <section>
      <h2>Team Members ({team.length})</h2>
      {team.map(member => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{member.data.name}</h3>
          <p>{member.data.role} - {member.data.department}</p>
          <p>{member.data.bio}</p>
        </div>
      ))}
    </section>

    <section>
      <h2>Case Studies ({caseStudies.length})</h2>
      {caseStudies.map(study => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{study.data.title}</h3>
          <p><strong>Client:</strong> {study.data.client}</p>
          <p><strong>Industry:</strong> {study.data.industry}</p>
          <p>{study.data.description}</p>
        </div>
      ))}
    </section>

    <section>
      <h2>Blog Posts ({blogPosts.length})</h2>
      {blogPosts.map(post => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{post.data.title}</h3>
          <p><strong>Author:</strong> {post.data.author}</p>
          <p><strong>Category:</strong> {post.data.category}</p>
          <p>{post.data.description}</p>
        </div>
      ))}
    </section>

    <section>
      <h2>Legal Pages ({legalPages.length})</h2>
      {legalPages.map(page => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{page.data.title}</h3>
          <p><strong>Type:</strong> {page.data.type}</p>
          <p>{page.data.description}</p>
        </div>
      ))}
    </section>

    <section>
      <h2>Press Items ({pressItems.length})</h2>
      {pressItems.map(item => (
        <div style="margin-bottom: 1rem; padding: 1rem; border: 1px solid #ccc;">
          <h3>{item.data.title}</h3>
          <p><strong>Type:</strong> {item.data.type}</p>
          <p>{item.data.description}</p>
        </div>
      ))}
    </section>
  </main>
</BaseLayout>
