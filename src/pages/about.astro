---
// Import layout
import SiteLayout from '@/layouts/SiteLayout.astro';

// Import components
import StandardHero from '@/components/ui/StandardHero.astro';
import StandardCTA from '@/components/ui/StandardCTA.astro';
import CompanyOverview from '@/components/sections/CompanyOverview.astro';
import TeamOverview from '@/components/sections/TeamOverview.astro';
import EnhancedSchema from '@/components/seo/EnhancedSchema.astro';

// Import page content from Content Collections
import { getEntry } from 'astro:content';
import { getCompanyInfo, getFeaturedTeamMembers } from '@/utils/content.ts';

// Get page content and SEO data
const pageContent = await getEntry('pages', 'about');
const seoData = await getEntry('seo', 'about');

// Get business data for about page
const companyInfo = await getCompanyInfo();
const teamMembers = await getFeaturedTeamMembers();

// Extract data
const { hero } = pageContent?.data || {};
const {
  title,
  description,
  keywords,
  robots,
  author,
  schema,
} = seoData?.data || {};

// Page metadata
const metadata = {
  title: title || 'About - Technical SEO Starter',
  description: description || 'Learn about our technical SEO expertise',
  url: new URL(Astro.url.pathname, Astro.site).toString(),
  robots,
  author,
  keywords: keywords?.join(', '),
  ogType: 'website',
  siteName: 'Technical SEO Starter',
  twitterCard: 'summary_large_image',
};
---

<SiteLayout metadata={metadata}>
  <EnhancedSchema
    type={schema?.type || 'about'}
    title={title || 'About - Technical SEO Starter'}
    description={description || 'Learn about our technical SEO expertise'}
    url={new URL(Astro.url.pathname, Astro.site).toString()}
    author={author ? { name: author } : undefined}
    breadcrumbs={schema?.breadcrumbs}
  />
  
  <StandardHero 
    badge={{
      icon: "M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z",
      text: "About Our Company"
    }}
    title="Building the Future of Technical SEO Excellence"
    highlightText="Excellence"
    description="We're a team of passionate technical SEO specialists and developers dedicated to helping businesses achieve exceptional search performance through cutting-edge strategies and proven methodologies."
    stats={[
      {
        icon: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",
        number: "150+",
        label: "Projects Completed",
        color: "blue"
      },
      {
        icon: "M13 10V3L4 14h7v7l9-11h-7z",
        number: "50+",
        label: "Happy Clients",
        color: "green"
      },
      {
        icon: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",
        number: "5+",
        label: "Years Experience",
        color: "purple"
      }
    ]}
  />
  
  <CompanyOverview company={companyInfo} />
  <TeamOverview teamMembers={teamMembers} />
  
  <StandardCTA 
    badge={{
      icon: "M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z",
      text: "Join Our Journey"
    }}
    title="Ready to Work with Technical SEO Experts?"
    highlightText="Experts"
    description="Experience the difference that true technical SEO expertise can make for your business. Let's discuss how we can help you achieve your digital goals."
    buttons={[
      {
        text: "Get In Touch",
        href: "/contact",
        type: "primary",
        icon: "M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"
      },
      {
        text: "View Our Team",
        href: "/team",
        type: "secondary",
        icon: "M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"
      }
    ]}
  />
</SiteLayout>
