---
// Import layout
import SiteLayout from '@/layouts/SiteLayout.astro';

// Import components
import Welcome from '@/components/sections/Welcome.astro';
import ContactInfo from '@/components/sections/ContactInfo.astro';
import EnhancedSchema from '@/components/seo/EnhancedSchema.astro';

// Import page content from Content Collections
import { getEntry } from 'astro:content';
import { getContactInfo } from '@/utils/content.ts';

// Get page content and SEO data
const pageContent = await getEntry('pages', 'contact');
const seoData = await getEntry('seo', 'contact');

// Get contact data
const contactInfo = await getContactInfo();

// Extract data
const { hero } = pageContent?.data || {};
const {
  title,
  description,
  keywords,
  robots,
  author,
  schema,
} = seoData?.data || {};

// Page metadata
const metadata = {
  title: title || 'Contact - Technical SEO Starter',
  description: description || 'Get in touch with our technical SEO experts',
  url: new URL(Astro.url.pathname, Astro.site).toString(),
  robots,
  author,
  keywords: keywords?.join(', '),
  ogType: 'website',
  siteName: 'Technical SEO Starter',
  twitterCard: 'summary_large_image',
};
---

<SiteLayout metadata={metadata}>
  <EnhancedSchema
    type={schema?.type || 'contact'}
    title={title || 'Contact - Technical SEO Starter'}
    description={description || 'Get in touch with our technical SEO experts'}
    url={new URL(Astro.url.pathname, Astro.site).toString()}
    author={author ? { name: author } : undefined}
    breadcrumbs={schema?.breadcrumbs}
  />
  
  <ContactInfo contact={contactInfo} />
</SiteLayout>
